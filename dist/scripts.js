var pokemonRepository=function(){var e=[],t=new Audio("assets/error.mp3"),n=new Audio("assets/exit.mp3"),o=new Audio("assets/beep.mp3");function r(e){var t=e;t.play(),t.volume=.1,0===t.currentTime&&t.remove()}function i(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(async function(t){return e.imageUrl=t.sprites.front_default,e.height=t.height,e.pokedexNumber=t.id,e.type=t.types,e.speciesUrl=t.species.url,fetch(e.speciesUrl).then(function(e){return e.json()}).then(function(t){let n=t.flavor_text_entries.filter(e=>"en"===e.language.name),o=t.genera.filter(e=>"en"===e.language.name);e.pkdxTitle=o[0].genus,e.pkdxEntry=n[0].flavor_text})}).catch(function(e){console.error(e)})}function a(){return e}function s(t){e.push(t)}function p(e){i(e).then(function(){var t=e.pkdxEntry.replace(/(\n|\f)/gm," "),n="The "+e.pkdxTitle,o=e.name.charAt(0).toUpperCase()+e.name.substring(1);document.querySelector("#pokemon-name").innerText=o,document.querySelector("#pokemon-Title").innerText=o,document.querySelector("#pokedex-number").innerText="#"+e.pokedexNumber,document.querySelector("#pokemon-height").innerText=e.height/10+" m",e.type.length>1?document.querySelector("#pokemon-type").innerText=e.type[0].type.name.charAt(0).toUpperCase()+e.type[0].type.name.substring(1)+" and "+e.type[1].type.name.charAt(0).toUpperCase()+e.type[1].type.name.substring(1):document.querySelector("#pokemon-type").innerText=e.type[0].type.name.charAt(0).toUpperCase()+e.type[0].type.name.substring(1),removePokeImage("pokemon-model"),createPokeImage(e.pokedexNumber,"pokemon-model"),playPokemonCry(e.pokedexNumber),document.querySelector(".show-modal").addEventListener("click",()=>{l(o,n,t,e.pokedexNumber)})})}function l(e,t,n,i){r(o);var a=document.querySelector("#modal-container");a.innerHTML="";var s=document.createElement("div");s.classList.add("modal");var p=document.createElement("button");p.classList.add("close-modal"),p.innerText=" X ",p.addEventListener("click",()=>{c()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&a.classList.contains("is-visible")&&c()}),a.addEventListener("click",e=>{e.target===a&&a.classList.contains("is-visible")&&c()}),i>99||(i=i<=99&&i>=10?"0"+i:"00"+i);var l=document.createElement("img");l.src=`https://raw.githubusercontent.com/HybridShivam/Pokemon/master/assets/images/${i}.png`,l.classList.add("modal-picture");var m=document.createElement("h1");m.innerText=e;var u=document.createElement("h2");u.innerText=t;var d=document.createElement("p");d.innerText=n,d.classList.add("modal-content"),s.appendChild(p),s.appendChild(m),s.appendChild(u),s.appendChild(d),s.appendChild(l),a.appendChild(s),a.classList.add("is-visible")}function c(){document.querySelector("#modal-container").classList.remove("is-visible"),r(n)}return{getAll:a,add:s,addPokeButton:function e(t){i(t).then(function(){var e=t.name.charAt(0).toUpperCase()+t.name.substring(1),n=document.querySelector(".list-group"),o=document.createElement("li"),r=document.createElement("button"),i=document.createElement("img");i.src=t.imageUrl,o.classList.add("list-group-item"),r.classList.add("dex-entry"),i.classList.add("pokemon-sprites"),-1===e.indexOf("-")?r.innerText=e:r.innerText=e.slice(0,e.indexOf("-")),r.appendChild(i),o.appendChild(r),n.appendChild(o),document.querySelector("button"),r.addEventListener("click",function(){p(t),document.body.scrollTop=document.documentElement.scrollTop=0})})},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=649").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){s(e={name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:i,showDetails:p,showModal:l,hideModal:c,Sound:r,error:t,beep:o,exit:n}}();function removePokeImage(e){document.getElementById(e).innerHTML=""}function createPokeImage(e,t){var n=document.createElement("img");e>99||(e=e<=99&&e>=10?"0"+e:"00"+e),n.srcset=`https://raw.githubusercontent.com/HybridShivam/Pokemon/master/assets/images/${e}.png`,document.getElementById(t).appendChild(n),n.setAttribute("class","pokeImage")}function playPokemonCry(e){var t=Number(e),n=new Audio(`assets/cries/${t}.wav`);n.play(),n.volume=.7}function missingNo(e,t){removePokeImage(t);var n=document.createElement("img");n.src="assets/missingno.png",n.setAttribute("class","pokeImage"),document.getElementById(t).appendChild(n),document.querySelector("#pokemon-name").innerHTML="ERROR "+e.toUpperCase()+" IS NOT AN AVAILABLE POKEMON",document.querySelector("#pokemon-Title").innerHTML="MissingNo.",document.querySelector("#pokedex-number").innerHTML="ERROR "+e.toUpperCase()+" IS NOT AN AVAILABLE POKEMON",document.querySelector("#pokemon-height").innerHTML="ERROR "+e.toUpperCase()+" IS NOT AN AVAILABLE POKEMON",document.querySelector("#pokemon-type").innerHTML="ERROR "+e.toUpperCase()+" IS NOT AN AVAILABLE POKEMON"}pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addPokeButton(e)})});var searchButton=document.getElementById("search");searchButton&&searchButton.addEventListener("click",function(){var e=document.getElementById("search-input").value;if(""===e)missingNo(e,"pokemon-model"),pokemonRepository.Sound(pokemonRepository.error);else{var t=pokemonRepository.getAll().filter(function(t){return t.name.toLowerCase().includes(e.toLowerCase())});0===t.length?(missingNo(e,"pokemon-model"),pokemonRepository.Sound(pokemonRepository.error)):(t.forEach(function(e){pokemonRepository.showDetails(e)}),document.getElementById("search-input").value="")}}),$("#search-input").keypress(function(e){13===e.keyCode&&(e.preventDefault(),$("#search").click())}),document.querySelector(".randomizer").addEventListener("click",function(){var e=pokemonRepository.getAll()[Math.floor(Math.random()*pokemonRepository.getAll().length)];pokemonRepository.showDetails(e)});